var F=Object.defineProperty,A=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var B=(n,e,o)=>e in n?F(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o,_=(n,e)=>{for(var o in e||(e={}))w.call(e,o)&&B(n,o,e[o]);if(v)for(var o of v(e))E.call(e,o)&&B(n,o,e[o]);return n},y=(n,e)=>A(n,D(e));import{j as h,r as N,R as I,a as O}from"./vendor.06f5d202.js";const C=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function o(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(t){if(t.ep)return;t.ep=!0;const i=o(t);fetch(t.href,i)}};C();const l=h.exports.jsx,m=h.exports.jsxs,L=h.exports.Fragment;function k(n){const{id:e,title:o,body:s,updated:t}=n.note,[i]=N.exports.useState(60),[u,r]=N.exports.useState(s);return N.exports.useEffect(()=>{const a=s?s.substring(0,i)+(s.length>i?"...":""):"\u5F00\u59CB\u8BB0\u5F55...";r(a)},[o,s]),m("div",{className:`notes__list-item ${n.isActiveNote?"notes__list-item--selected":""}`,"data-note-id":e,onClick:()=>{n.onClick(e)},children:[l("div",{className:"notes__small-title",children:o||"\u8F93\u5165\u6807\u9898"}),l("div",{className:"notes__small-body",children:u}),l("div",{className:"notes__small-updated",children:new Date(t).toLocaleString(void 0,{dateStyle:"full",timeStyle:"short"})})]})}const j="_noteBtn_m2um7_1",M="_success_m2um7_37",P="_info_m2um7_53",R="_warning_m2um7_71",V="_danger_m2um7_89";var b={noteBtn:j,default:"_default_m2um7_19",success:M,info:P,warning:R,danger:V};const x=n=>{const{onClick:e,style:o,text:s,className:t}=n;return l("button",{className:`${b.noteBtn} ${b[t]}`,style:o,onClick:e,children:s||"\u6309\u94AE"})},S=(n,e="default")=>o=>l(n,y(_({},o),{className:e})),J=S(x,"info"),$=S(x,"danger");function q(n){const{notes:e,notePreviewVisibility:o,onNoteAdd:s,activeNote:t,onNoteEdit:i,onNoteSelect:u}=n,[r,a]=N.exports.useState({title:"",body:""}),[c,p]=N.exports.useState(-1),g=()=>{confirm("\u662F\u5426\u5220\u9664\u7B14\u8BB0\uFF1F")&&n.onNoteDelete(c)};return N.exports.useEffect(()=>{t&&(p(t.id),a({title:t.title,body:t.body}))},[t]),m(L,{children:[m("div",{className:"notes__sidebar",children:[l("button",{className:"notes__add",type:"button",onClick:s,children:"\u6DFB\u52A0\u65B0\u7684\u7B14\u8BB0 \u{1F4D2}"}),l("div",{className:"notes__list",children:e.map(d=>l(k,{note:d,isActiveNote:c===d.id,onClick:()=>{u(d.id)}},d.id))})]}),m("div",{className:"notes__preview",style:{visibility:o?"visible":"hidden"},children:[l("input",{className:"notes__title",type:"text",placeholder:"\u8F93\u5165\u6807\u9898...",value:r.title,onInput:d=>{a(y(_({},r),{title:d.currentTarget.value}))},onBlur:d=>{i(r)}}),l("textarea",{className:"notes__body",value:r.body,onInput:d=>{a(y(_({},r),{body:d.currentTarget.value}))},onBlur:d=>{i(r)},placeholder:"\u7F16\u8F91\u7B14\u8BB0..."}),m("div",{className:"note__btns",children:[l(J,{text:"\u4FDD\u5B58",onClick:()=>{i(r),alert("\u4FDD\u5B58\u6210\u529F\uFF01")}}),l($,{text:"\u5220\u9664",onClick:g})]})]})]})}class f{static getAllNotes(){return JSON.parse(localStorage.getItem("notesapp-notes")||"[]").sort((o,s)=>new Date(o.updated)>new Date(s.updated)?-1:1)}static saveNote(e){const o=f.getAllNotes(),s=o.find(t=>t.id===e.id);s?(s.title=e.title,s.body=e.body,s.updated=new Date().toISOString()):(e.id=Math.floor(Math.random()*1e6),e.updated=new Date().toISOString(),o.push(e)),localStorage.setItem("notesapp-notes",JSON.stringify(o))}static deleteNote(e){const s=f.getAllNotes().filter(t=>t.id!=e);localStorage.setItem("notesapp-notes",JSON.stringify(s))}}function G(){const[n,e]=N.exports.useState(f.getAllNotes()),[o,s]=N.exports.useState(!1),[t,i]=N.exports.useState(null),u=c=>{i(c)},r=()=>{e(f.getAllNotes())};N.exports.useEffect(()=>{s(n.length>0),n.length>0&&u(n[0])},[n]);function a(){return{onNoteSelect:c=>{const p=n.find(g=>g.id===c);p&&u(p)},onNoteAdd:()=>{const c={title:"",body:"",id:-1,updated:""};f.saveNote(c),r()},onNoteEdit:c=>{f.saveNote({id:t&&t.id||-1,title:c.title,body:c.body,updated:""}),r()},onNoteDelete:c=>{f.deleteNote(c),r()}}}return l("div",{id:"App",children:l(q,{notes:n,notePreviewVisibility:o,activeNote:t,onNoteAdd:a().onNoteAdd,onNoteEdit:a().onNoteEdit,onNoteSelect:a().onNoteSelect,onNoteDelete:a().onNoteDelete})})}I.render(l(O.StrictMode,{children:l(G,{})}),document.getElementById("root"));
